UPDATE FDAPreferredSubstanceToRxNORM

(1) slice the big file FDAPreferredSubstance_03132014.txt to several pieces in case of crash of shell

split data command: 

$ split -l 110000 ~/linkedSPLs-upgrade/Data_Source/FDA/FDAPreferredSubstance_10202014.txt -d ~/linkedSPLs-upgrade/RxNORM-mapping/data/subset_

(2) open the python script getPreferredSubstanceRxNORM_Mapping.py, change value of input variable to the name of split data sets

The python script getPreferredSubstanceRxNORM_Mapping.py can get the  mappings PreferredSubstance to rxcui

Run the script and output to PreferredSubstance-to-Rxcui-mapping_03132014.txt by command:

$ python getPreferredSubstanceRxNORM_Mapping.py > PreferredSubstance-to-Rxcui-mapping_03132014.txt &

(3) take care of rest of data set and then import PreferredSubstance-to-Rxcui-mapping_03132014.txt into FDAPreferredSubstanceToRxNORM 


command:
$ mysql -u root -p --local-infile linkedSPLs
LOAD DATA LOCAL INFILE "/PATH/TO/PS-to-Rxcui-mapping-10272014.txt" INTO TABLE FDAPreferredSubstanceToRxNORM FIELDS TERMINATED BY '|' LINES TERMINATED BY '\n' (PreferredSubstance, RxNORM);

------------------------------------------------------------

UPDATE SPLSetIDToRxNORM

(1) download rxnorm_mappings_03132014.txt from dailymed site -> dowload -> mappings

(2) slice data by linux shell command: 
cat /PATH/TO/Data_Source/dailymed/rxnorm_mappings_10292014.txt | cut -f 1,3,4 -d '|' | sort > /PATH/TO/RxNORM-mapping/converted_rxnorm_mappings_10292014.txt

(3)import data in converted_rxnorm_mappings_10292014.txt to mysql table SPLSetIDToRxNORM
command in shell:
mysql -u root -p --local-infile linkedSPLs
LOAD DATA LOCAL INFILE './converted_rxnorm_mappings_10292014.txt' INTO TABLE `SPLSetIDToRxNORM`  FIELDS TERMINATED BY '|' LINES TERMINATED BY '\n' (setId, RxCUI, RxClinicalDrug); 
